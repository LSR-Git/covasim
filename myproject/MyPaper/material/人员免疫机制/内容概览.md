📚 文档内容概览
这份文档全面解析了Covasim的免疫系统，包含以下12个主要部分：
1. 免疫系统概述
● 基于中和抗体（NAb）的建模方法
● 两个免疫来源：自然免疫 vs 疫苗免疫
● 三个保护维度：易感性、症状、重症
2. 核心概念
● 中和抗体（NAb）的生命周期
● 交叉免疫机制
● 免疫增强（Boosting）效应
3. 变种病毒（Variant）
● variant 类的使用方法
● 预定义变种（Alpha, Beta, Delta, Omicron等）
● 如何创建自定义变种
● 变种参数详解
4. 中和抗体（NAb）机制
● ✅ update_peak_nab() - 更新峰值NAb水平
● ✅ update_nab() - 随时间应用衰减
● ✅ calc_VE() - NAb到免疫保护的转换
● ✅ calc_VE_symp() - 症状性疾病的疫苗效力
5. 免疫计算
● init_immunity() - 初始化免疫矩阵
● check_immunity() - 计算当前免疫力（详细流程图）
● 自然免疫和疫苗免疫的组合方式
6. 免疫衰减机制
● 📊 nab_growth_decay() - 最真实的模型（增长+衰减）
● 📊 nab_decay() - 简化版（仅衰减）
● 📊 exp_decay() - 简单指数衰减
● 📊 linear_decay() - 线性衰减
● 包含可视化图表和对比表
7. 完整示例（4个实用示例）
● ✅ 示例1：基本的免疫和变种使用
● ✅ 示例2：比较不同衰减函数
● ✅ 示例3：探索交叉免疫
● ✅ 示例4：自定义免疫追踪分析器
8. 参数详解
● NAb参数配置
● 症状严重程度的免疫缩放
● 变种参数
● 疫苗参数
9. 常见问题（7个FAQ）
● Q1: 如何启用/禁用免疫衰减？
● Q2: 如何查看个体的NAb水平？
● Q3: 如何自定义衰减函数？
● Q4: 如何设置变种间的交叉免疫？
● Q5: 自然免疫和疫苗免疫如何组合？
● Q6: 如何模拟混合感染？
● Q7: 如何绘制NAb水平变化？
10. 最佳实践
● ✅ 推荐做法
● ❌ 应避免的做法
11. 总结
● 核心要点回顾
● 关键函数速查表
12. 参考资源
● 科学文献引用
● Covasim资源链接
🎯 核心知识点
免疫系统的核心流程
感染/接种疫苗
    ↓
update_peak_nab() - 设置峰值NAb
    ↓
每个时间步:
    update_nab() - 应用衰减
    ↓
    check_immunity() - 计算免疫保护
    ↓
    calc_VE() - 转换为保护因子
    ↓
降低感染/症状/重症风险
免疫保护的数学模型
VE(nab) = exp(α) × nab^β / (1 + exp(α) × nab^β)
这是一个S型曲线，NAb水平越高，保护越强。
💡 实用示例代码
文档中包含了多个可以直接运行的完整示例：
1. 基本使用 - 添加变种和疫苗
2. 衰减对比 - 比较不同衰减函数的效果
3. 交叉免疫 - 探索变种间的免疫保护
4. 免疫追踪 - 可视化NAb和免疫动态
📊 可视化图表
文档包含多个可视化示例：
● NAb增长和衰减曲线
● 免疫计算流程图
● 交叉免疫矩阵示例
● 疫苗效力曲线
🔗 相关文档
现在你有两份完整的指南：
1. Covasim自定义干预措施完整指南.md - 如何编写自定义干预措施
2. Covasim免疫机制详解.md - 免疫系统的工作原理
这两份文档互补，涵盖了Covasim的核心功能！
如果你需要更多具体的示例或有任何问题，随时告诉我！🎉